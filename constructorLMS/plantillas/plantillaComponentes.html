{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototipo</title>
    <link type='text/css' rel="stylesheet" href='{% static "css/styleComponentes.css" %}'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>




    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



        
        <style>
          .mi-clase {
      width: calc(100% - 30px);
      height: 100px;
      margin: 15px;
      background-color: #FFF;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;   
        }
        .mi-div {
      position: absolute;
      top: 50px;
      left: 50px;
      width: 100px;
      height: 100px;
      background-color: red;
    }
    .selected {
      border: 2px solid rgb(51, 51, 51);
    }

    .btn-eliminar {
      background-color: rgb(32, 32, 32);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
    }
    
    </style>
    
</head>
<body>
    
        <nav>
<span id="open-close"><i class='bx bx-menu'></i></span>
<span id="open-closeC"><i class='fa-solid fa-gear'></i></span>
<span id="open-closeU"><i class='fa-regular fa-user'></i></span>

</nav >

<aside id="aside" class="desplegar">
    <div class="container-svg">
        <div>
            <label for="seleccionador-archivos">
                <span>Abrir</span>
            </label>
            <input type="file" id="seleccionador-archivos" style="display:none">
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span>Guardar</span>
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span><button onclick="guardarComoXAPI()">Guardar como xAPI</button></span>
        </div>
    </div>
</aside>


<aside id="asideC" class="desplegar">
    <div class="container-svg">
        <div>
            <span>Opcion 4</span>
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span>Opcion 5</span>
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span>Opcion 6</span>
        </div>
    </div>
</aside>

<aside id="asideU" class="desplegar">
    <div class="container-svg">
        <div>
            <span>Opcion 7</span>
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span>Opcion 8</span>
        </div>
    </div>
    <div class="container-svg">
        <div>
            <span>Opcion 9</span>
        </div>
    </div>
</aside>

       
    

    <main>
        <div class="left">
            <div class="btn-group">
              <button id="btn-agregar" class="btn btn-primary"><i class="fa fa-plus"></i> Agregar Diapositiva</button>
            </div>
          
            <div class="contenedor">
              <div id="div-1" class="mi-clase">Div 1</div>
            </div>
          </div>


        <div class="center">
            <div class="box-visor" id="box-visor">
            
            </div>
        </div>

        <div class="right">
            <ul>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-text-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M19 10h-14"></path>
                        <path d="M5 6h14"></path>
                        <path d="M14 14h-9"></path>
                        <path d="M5 18h6"></path>
                        <path d="M18 15v6"></path>
                        <path d="M15 18h6"></path>
                     </svg>
                     <p>Agregar texto</p>
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-photo-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M15 8h.01"></path>
                        <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5"></path>
                        <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4"></path>
                        <path d="M14 14l1 -1c.67 -.644 1.45 -.824 2.182 -.54"></path>
                        <path d="M16 19h6"></path>
                        <path d="M19 16v6"></path>
                     </svg>
                     <p>Agregar imagen</p>
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-video-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"></path>
                        <path d="M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"></path>
                        <path d="M7 12l4 0"></path>
                        <path d="M9 10l0 4"></path>
                     </svg>
                     <p>Agregar video</p>
                </li>
                <li>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-music" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M6 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                        <path d="M16 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                        <path d="M9 17l0 -13l10 0l0 13"></path>
                        <path d="M9 8l10 0"></path>
                     </svg>
                     <p>Agregar audio</p>
                </li>
            </ul>
        </div>
    </main>
    






    <script>
        $(document).ready(function() {
           // Agrega la clase "draggable" y hace que el div sea arrastrable
        $(".mi-clase").addClass("ui-widget-content");
        // Configura la función "draggable" para los divs
        $(".mi-clase").draggable({
          // Define la opacidad del div mientras se arrastra
          opacity: 0.5,
          // Define el cursor mientras se arrastra el div
          cursor: "move",
          // Define la distancia mínima que debe moverse un elemento para iniciar el arrastre
          distance: 10,
          // Define la función para actualizar la posición del div mientras se arrastra
          stop: function(event, ui) {
            // Actualiza la posición del div
            $(this).css("left", ui.position.left);
            $(this).css("top", ui.position.top);
          }
        });
      
          // Agrega el botón de eliminar al lado del botón de agregar
          $("#btn-agregar").after('<span id="btn-eliminar" class="btn btn-danger"><i class="fa fa-trash"></i></span>');
      
          $("#btn-eliminar").click(function() {
    var selectedDiv = $(".selected");
    // Check if there is more than one div in the container
    if ($(".mi-clase").length > 1 && selectedDiv.length) {
      // Remove the selected div
      selectedDiv.remove();
    }
  });

      
          $("#btn-agregar").html("<i class='fa fa-plus'></i>");
          $("#btn-agregar").click(function() {
            const id = "div-" + Math.random().toString(36).substr(2, 9);
            const nuevoDiv = $("<div>").attr("id", id).text(id).addClass("mi-clase");
      
            $(".contenedor").append(nuevoDiv);
          });
        });
      
        $(document).on('click', '.mi-clase', function() {
          // Remueve la clase "selected" de todos los divs
          $('.mi-clase').removeClass('selected');
          // Agrega la clase "selected" al div seleccionado
          $(this).addClass('selected');
          var contenido = $(this).html();
          $("#box-visor").html(contenido);
        });
      
        $(document).on('click', '.mi-clase .nuevo-div', function(event) {
          event.stopPropagation(); // Prevents the event from bubbling up to the parent div
          var nuevoContenido = 'Nuevo contenido'; // Replace with your desired content
          $(this).append('<div class="mi-clase">' + nuevoContenido + '</div>');
        });




        function guardarComoXAPI() {
  // Aquí debes agregar el código para convertir los datos a formato xAPI
  const xapiData = "Datos en formato xAPI"; // Reemplazar por los datos en formato xAPI
  const blob = new Blob([xapiData], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const enlace = document.createElement("a");
  enlace.href = url;
  enlace.download = "datos.xapi";
  document.body.appendChild(enlace);
  enlace.click();
  document.body.removeChild(enlace);
  URL.revokeObjectURL(url);
}











      </script>
    
    <script src="{% static 'js/desplegar.js' %}"></script>
</body>
</html>